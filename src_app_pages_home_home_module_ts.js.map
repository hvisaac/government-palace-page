{"version":3,"file":"src_app_pages_home_home_module_ts.js","mappings":"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","sources":["./src/app/pages/home/home-routing.module.ts","./src/app/pages/home/home.module.ts","./src/app/pages/home/home.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\nimport { StreetLightingReportPageModule } from '../street-lighting-report/street-lighting-report.module';\nimport { StreetLightingReportPage } from '../street-lighting-report/street-lighting-report.page';\n\nimport { WaterPageModule } from '../water/water.module';\nimport { WaterPage } from '../water/water.page';\n\n@NgModule({\n  entryComponents: [\n    StreetLightingReportPage,\n    WaterPage\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule,\n    StreetLightingReportPageModule,\n    WaterPageModule,\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","import { Component, ViewChild } from '@angular/core';\nimport { IonSegment, MenuController, NavController, ModalController } from '@ionic/angular';\nimport { MapService } from 'src/app/services/map.service';\nimport { UserInterface } from '../../interfaces/user-interface';\nimport { ReportService } from '../../services/report.service';\nimport { StreetLightingReportPage } from '../street-lighting-report/street-lighting-report.page';\nimport { WaterPage } from '../water/water.page';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n  segment = 'all';\n  CurrentUser: UserInterface;\n  Reports: any[] = [];\n\n  constructor\n    (\n      private NavController: NavController,\n      private ReportService: ReportService,\n      private MenuController: MenuController,\n      private ModalController: ModalController,\n      private MapService: MapService,\n    ) { }\n\n  ngOnInit() {\n    this.MenuController.enable(true);\n    this.CurrentUser = JSON.parse(sessionStorage.getItem('user'));\n    if (this.CurrentUser[0]._id == '' || this.CurrentUser[0]._id == null) {\n      this.NavController.navigateRoot('/login');\n    }\n\n    this.ReportService.getMyReports(this.CurrentUser[0]._id).subscribe((Reports: any) => {\n      console.log(Reports);\n      for (let report of Reports) {\n        report.department = JSON.parse(report.department);\n        this.Reports.push(report);\n      }\n      console.log(this.Reports);\n    });\n  }\n\n  async openStreetLightingRerpot() {\n    const modal = await this.ModalController.create({\n      component: StreetLightingReportPage,\n      componentProps: {\n        CurrentUser: this.CurrentUser,\n      }\n    });\n\n    modal.present();\n  }\n\n  async openWaterRerpot() {\n    const modal = await this.ModalController.create({\n      component: WaterPage,\n    });\n\n    modal.present();\n  }\n\n  segmentChange(event) {\n    this.segment = event.detail.value;\n  }\n\n  ionViewDidEnter() {\n    for (let i = 0; i < this.Reports.length; i++) {\n      this.MapService.initOSMWithDescription(this.Reports[i].geolocation.latitude, this.Reports[i].geolocation.longitude, 'map'+i,  this.Reports[i].photo);\n    }\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}